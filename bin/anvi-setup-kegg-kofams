#!/usr/bin/env python
# -*- coding: utf-8

import sys

import anvio
import anvio.kegg as kegg

from anvio.errors import ConfigError, FilesNPathsError
from anvio.terminal import time_program

__author__ = "Developers of anvi'o (see AUTHORS.txt)"
__copyright__ = "Copyleft 2015-2020, the Meren Lab (http://merenlab.org/)"
__license__ = "GPL 3.0"
__version__ = anvio.__version__
__maintainer__ = "Iva Veseli"
__email__ = "iveseli@uchicago.edu"
__provides__ = ["kofam-data", "kegg-modules-db",]
__description__ = "Download and setup KEGG KOfam HMM profiles."

@time_program
def main(args):
    setup = kegg.KeggSetup(args)
    setup.setup_profiles()

if __name__ == '__main__':
    import argparse

    parser = argparse.ArgumentParser(description=__description__)
    parser.add_argument('--kofam-data-dir', default=None, type=str, help="The directory for KEGG KOfam HMM profiles to be stored. If you leave it\
                        as is without specifying anything, the default destination for the data directory will be used to set things\
                        up. The advantage of it is that everyone will be using a single data directory, but then you may need\
                        superuser privileges to do it. Using this parameter you can choose the location of the data directory somewhere\
                        you like. However, when it is time to run Kofam, you will need to remember that path and provide it to the program.")
    parser.add_argument(*anvio.A('reset'), **anvio.K('reset'))
    parser.add_argument('--quiet', default=False, action="store_true", help="Use this flag for less verbose output.")
    parser.add_argument(*anvio.A('just-do-it'), **anvio.K('just-do-it'))

    args = anvio.get_args(parser)

    try:
        main(args)

    except ConfigError as e:
        print(e)
        sys.exit(-1)
    except FilesNPathsError as e:
        print(e)
        sys.exit(-1)
