#!/usr/bin/env python
# -*- coding: utf-8

import argparse
import os
import re
import sys
import time
from collections import Counter

import anvio
import anvio.scgsdatabase as scgsdatabase
import anvio.fastalib as f
import anvio.terminal as terminal


__author__ = "Developers of anvi'o (see AUTHORS.txt)"
__copyright__ = "Copyleft 2015-2018, the Meren Lab (http://merenlab.org/)"
__credits__ = []
__license__ = "GPL 3.0"
__version__ = anvio.__version__
__maintainer__ = "Quentin Clayssen"
__email__ = "quentin.clayssen@gmail.com"


run = terminal.Run()
progress = terminal.Progress()

#def main(args):





if __name__ == '__main__':
    import argparse

    parser = argparse.ArgumentParser(description="Create diamond database matching with match between import fasta of SCGs with taxonomy and HMM from anvi'o.")

    parser.add_argument('-hm', '--hmms', default = None,
                        help = "fasta file of hmm from anvi'o")
    parser.add_argument('-g', '--genesfilesdirectory', default = None,
                        help = "directory with fasta file for import SCGs")
    parser.add_argument('-o', '--outputdirectory', default = None,
                        help = "out put directory")
    parser.add_argument('-t', '--taxofiles', default = None,
                        help = "tsv file with taxonomy")
    parser.add_argument('-s', '--scgsdirectory', default = None,
                        help = "scgsdirectory")
    parser.add_argument(*anvio.A('num-threads'), **anvio.K('num-threads'))
    #parser.add_argument(*anvio.A('list-states'), **anvio.K('list-states'))

    args = anvio.get_args(parser)

    try:
        scgsdatabase = scgsdatabase.scgsdatabase(args)
        #scgsdatabase.process()
    except ConfigError as e:
        print(e)
        sys.exit(-1)
    except FilesNPathsError as e:
        print(e)
        sys.exit(-2)
